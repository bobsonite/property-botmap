<!doctype html>
<html lang="en">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1, viewport-fit=cover" />
  <title>Student Housing â€” Bot + Map</title>
  <link href="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.css" rel="stylesheet" />
  <link href="./styles/app.css" rel="stylesheet" />
</head>
<body>
  <div class="wrap">
    <!-- Chat panel (left on desktop, bottom sheet on mobile) -->
    <div id="botPane" title="Student Bot">
      <!-- Mobile/Tablet header bar -->
      <div class="sheet-header" data-for="botPane">
        <div class="sheet-title">Chat</div>
        <button class="sheet-close" aria-label="Close chat" data-close="#botPane">âœ•</button>
      </div>
      <!-- Landbot mounts inside this container (kept as-is by your script) -->
    </div>

    <!-- Map (centre) -->
    <div id="map">
      <div class="topbar">
        <span class="pill">session_id: <span id="sid"></span></span>
        <!-- Theme toggle removed; default = Streets; Satellite available via code-only flag -->
      </div>
    </div>

    <!-- Properties panel (right on desktop, bottom sheet on mobile) -->
    <aside id="listPane">
      <!-- Mobile/Tablet header bar -->
      <div class="sheet-header" data-for="listPane">
        <div class="sheet-title">Properties</div>
        <button class="sheet-close" aria-label="Close properties" data-close="#listPane">âœ•</button>
      </div>

      <!-- Filter bar -->
      <div id="filtersBar" class="collapsed">
        <div class="filters-row">
          <div class="filters-title">Filters</div>
          <div class="spacer"></div>
          <button id="savedToggle" class="pill pill-ghost" aria-label="Show saved">â¤ <span id="savedCount">0</span></button>
          <button id="filtersReset" class="pill pill-ghost" aria-label="Reset filters">Reset</button>
          <button id="filtersToggle" class="pill" aria-expanded="false">Show</button>
          <button id="placesToggle" class="pill pill-ghost" aria-pressed="false" aria-label="Show nearby places">ğŸ“ Show places</button>
          <div id="countBadge" class="count-badge">0 properties in view</div>
        </div>
        <div id="filtersBody" class="filters-body">
          <div id="amenityFilters"></div>
        </div>
        <div id="savedPanel" class="saved-panel" hidden></div>
      </div>
      <!-- Detail panel (future use) -->
      <div id="detailPanel" class="detail-panel" hidden></div>
      <!-- Cards render beneath -->
      <div id="cardsMount"></div>
    </aside>

    <!-- Mobile FABs -->
    <button id="toggleChat" class="fab" aria-label="Open chat">ğŸ’¬</button>
    <button id="toggleList" class="fab" aria-label="Open properties">ğŸ </button>
  </div>

  <!-- Libs -->
  <script src="https://api.mapbox.com/mapbox-gl-js/v2.15.0/mapbox-gl.js"></script>
  <script src="https://cdn.jsdelivr.net/npm/@supabase/supabase-js@2"></script>
  <script src="https://cdn.ably.com/lib/ably.min-1.js"></script>
  <script type="module" src="https://cdn.landbot.io/landbot-3/landbot-3.0.0.mjs"></script>

  <script type="module" src="./scripts/app.js"></script>
</body>
</html>